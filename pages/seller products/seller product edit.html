<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Seller edit</title>

        <link rel="stylesheet" href="../../assets/css/seller product edit.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Kumbh+Sans:wght@100;200;300;400;500;600;700;800;900&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Nerko+One&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet">

    </head>

    <body>

        <header>
            <div class="logo">
                <a href="../../index.html">
                    <img src="../../assets/img/image-removebg-preview.png" alt="logo" width="100px"
                        height="80px"></a>
            </div>

            <h1>Edit You Product Page</h1>

            <div class="navigations">

                <div class="accound">
                    <a href="../profile page/profile page.html">
                        <i class="fa fa-user-circle-o"
                            style="font-size:24px;color: black;"></i>
                    </a>
                </div>

                <div class="favorite">
                    <a href="../../pages/seller products/seller create product.html">
                        <i class="fa fa-plus"
                            style="font-size: 22px; color:black;"></i></a>
                </div>

            </div>
        </header>

        <section class="profile_details">

            <img class="run" src="../../assets/img/10.jpeg" alt="photo" width="250px" height="250px">

            <div class="form">
                <div class="details">
                    <div class="details_list">
                        <p class="list">UplodePhoto:</p>
                        <input type="text" placeholder="https//.//" class="list_2" id="uppic">
                    </div>

                    <div class="details_list">
                        <p class="list"> ProductName:</p>
                        <input type="text" placeholder="Kanchipuram saree" class="list_2" id="productname">
                    </div>

                    <div class="details_list">
                        <p class="list">Spical Price:</p>
                        <input type="text" placeholder=" ₹4000" class="list_2" id="productprice">
                    </div>

                    <div class="details_list">
                        <p class="list">Review:</p>
                        <input type="text" placeholder="YOUR WHISH" class="list_2" id="productreview">
                    </div>

                    <div class="details_list">
                        <p class="list">offers:</p>
                        <input type="text"
                            placeholder="% off"
                            class="list_2" id="productoffer">
                    </div>

                    <div class="details_list">
                        <p class="list">discription:</p>
                        <textarea
                            placeholder=" *Special PriceGet extra 15% off (price inclusive of cashback/coupon)T&C
                        * Buy More, Save MoreBuy worth ₹2 save 1%See all productsT&C
                                               *Bank Offer10% off on ICICI Bank Credit Cards, up to ₹300. On orders of ₹1750 and aboveT&C "
                            class="list_2" id="descrip"></textarea>
                    </div>
                </div>
                <button type="button" class="save">Save</button>
                <button type="button" class="delete_data">Delete</button>
            </div>
        </section>
        <a href></a>

        <script>
        // const email = document.getElementById("email").value
        // const confirm_password = document.getElementById("confirm_password").value
        // const password = document.getElementById("password").value
        // const name = document.getElementById("name").value

        // console.log(email)
        // console.log(password)
        // console.log(name)
        // console.log(confirm_password)

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const product_id = urlParams.get("product");

        const uuid = JSON.parse(localStorage.getItem("product_uuid"));
        const product = JSON.parse(localStorage.getItem("product_crud"));

        function find_data(e) {
          return e.product_uuid === uuid;
        }

        let product_data = product.find(find_data);
        // console.log(product_data)
        document.getElementById("uppic").value = product_data.product_uuid;
        document.getElementById("productname").value = product_data.productname;
        document.getElementById("productprice").value = product_data.productprice;
        document.getElementById("productreview").value = product_data.productreview;
        document.getElementById("descrip").value = product_data.descrip;
        document.getElementById("productoffer").value = product_data.productoffer;

        const update = document.querySelector("button.save");
        
        function upadate_product() {
          const produc_uuid = JSON.parse(localStorage.getItem("product_uuid"));
          const product_crud = JSON.parse(localStorage.getItem("product_crud"));
          function find_Data(e) {
            return e.product_uuid === produc_uuid;
          }
          update.addEventListener("click", upadate_product);
          product_data = product_crud.find(find_Data);
          // console.log(product_data)
          const edit_image = document.getElementById("uppic").value;
          const edit_name = document.getElementById("productname").value;
          const edit_price = document.getElementById("productprice").value;
          const edit_review = document.getElementById("productreview").value;
          const edit_descrip = document.getElementById("descrip").value;
          const edit_offer = document.getElementById("productoffer").value;

          product_data.product_uuid = edit_image;
          product_data.productname = edit_name;
          product_data.productprice = edit_price;
          product_data.productreview = edit_review;
          product_data.productoffer = edit_offer;
          product_data.descrip = edit_descrip;

          localStorage.setItem("product_crud", JSON.stringify(product_crud));
          alert("Product updated successfully");
          window.location.href = `../seller products/seller products.html?product=${product_id}`;
        }

        function delData() {
          if (window.confirm("Are you sure?")) {
            const unique_id = JSON.parse(localStorage.getItem("product_uuid"));
            const product_list = JSON.parse(localStorage.getItem("product_crud"));
            function findData(e) {
                return e.product_uuid === unique_id;
            }
            const product_datas = product_list.find(findData);
            const indexOfUser = product_list.indexOf(product_datas);

            product_list.splice(indexOfUser, 1);
            localStorage.setItem("product_crud", JSON.stringify(product_list));
            window.location.href = "../seller products/seller product list.html";
          }
        }
        const del_product = document.querySelector("button.delete_data");
        del_product.addEventListener("click", delData);
    </script>
        <!-- <a href="./seller product list.html"></a> -->

    </body>

</html>